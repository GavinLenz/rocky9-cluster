{
  "all": {
    "children": {
      "controller": {
        "hosts": {
          "head": {
            "ansible_host": "localhost",
            "ansible_connection": "local",
            "ansible_python_interpreter": "/usr/bin/python3",
            "cluster_role": "controller",
            "pxe_iface": "enp5s0",
            "pxe_server_ip": "10.0.0.1",
            "pxe_install_drive": "nvme0n1",
            "pxe_default_target": "fresh",
            "pxe_ipxe_menu_items": [
              {
                "key": "i",
                "label": "Fresh install",
                "target": "fresh"
              },
              {
                "key": "l",
                "label": "Boot from NVMe",
                "target": "local"
              }
            ],
            "ansible_become": true,
            "ansible_become_method": "sudo",
            "ansible_become_user": "root",
            "ansible_become_password": "your_sudo_password"
          }
        }
      },
      "compute": {
        "hosts": {
          "node01": {
            "ansible_host": "10.0.0.11",
            "ansible_connection": "ssh",
            "ansible_user": "ansible",
            "ansible_python_interpreter": "/usr/bin/python3",
            "cluster_role": "compute",
            "pxe_mac": [
              "84:47:09:4d:5b:d6"
            ]
          },
          "node02": {
            "ansible_host": "10.0.0.12",
            "ansible_connection": "ssh",
            "ansible_user": "ansible",
            "ansible_python_interpreter": "/usr/bin/python3",
            "cluster_role": "compute",
            "pxe_mac": [
              "84:47:09:4d:57:37"
            ]
          },
          "node03": {
            "ansible_host": "10.0.0.13",
            "ansible_connection": "ssh",
            "ansible_user": "ansible",
            "ansible_python_interpreter": "/usr/bin/python3",
            "cluster_role": "compute",
            "pxe_mac": [
              "84:47:09:4d:51:76"
            ]
          }
        }
      }
    },
    "vars": {
      "cluster_name": "cluster",
      "cluster_description": "",
      "cluster_repo_root": "/root/work/rocky9-cluster",
      "cluster_config_root": "/root/work/rocky9-cluster/config",
      "cluster_profiles": {
        "profiles": {
          "common": {
            "timezone": "UTC",
            "packages": [
              "vim-enhanced",
              "tmux",
              "git",
              "curl",
              "rsync"
            ],
            "motd": "Cluster automation controller"
          }
        }
      },
      "cluster_roles": {
        "controller": {
          "stack": [
            "common",
            "pxe",
            "slurm"
          ]
        },
        "compute": {
          "stack": [
            "common",
            "slurm"
          ]
        }
      },
      "network_config": {
        "pxe_iface": "enp5s0",
        "server_ip": "10.0.0.1",
        "subnet": "10.0.0.0/24",
        "netmask": "255.255.255.0",
        "gateway": null,
        "dns": "8.8.8.8",
        "dhcp_range": {
          "start": "10.0.0.10",
          "end": "10.0.0.15"
        },
        "mtu": 1500
      },
      "pxe_config": {
        "username": "ansible",
        "vendor": "rocky",
        "image": "rocky9_minimal",
        "install": {
          "drive": "nvme0n1",
          "disable_interfaces": []
        },
        "paths": {
          "iso_dir": "/srv/pxe/iso",
          "iso_mount": "/var/www/html/os",
          "http_root": "/var/www/html",
          "tftp_root": "/srv/tftp"
        },
        "packages": {
          "base": [
            "dnsmasq",
            "tftp-server",
            "httpd",
            "ipxe-bootimgs",
            "rsync",
            "python3-libselinux",
            "policycoreutils-python-utils"
          ],
          "efi": []
        },
        "ipxe": {
          "default_target": "fresh",
          "timeout_ms": 5000,
          "menu": [
            {
              "key": "i",
              "label": "Fresh install",
              "target": "fresh"
            },
            {
              "key": "l",
              "label": "Boot from NVMe",
              "target": "local"
            }
          ]
        },
        "role_packages": {
          "controller": [
            "@^minimal-environment"
          ],
          "compute": [
            "@^minimal-environment"
          ]
        }
      },
      "images": {
        "rocky9_minimal": {
          "name": "Rocky-9.6-x86_64-minimal.iso",
          "url": "https://download.rockylinux.org/pub/rocky/9/isos/x86_64/Rocky-9.6-x86_64-minimal.iso",
          "kernel": "os/images/pxeboot/vmlinuz",
          "initrd": "os/images/pxeboot/initrd.img",
          "vendor": "rocky",
          "description": "Rocky Linux 9 minimal image."
        }
      },
      "repos": {
        "rocky9_dvd": {
          "name": "Rocky-9.6-x86_64-dvd.iso",
          "url": "https://download.rockylinux.org/pub/rocky/9/isos/x86_64/Rocky-9.6-x86_64-dvd.iso",
          "mount_path": "/var/www/html/os",
          "vendor": "rocky",
          "description": "Rocky Linux 9 dvd for internal repo."
        }
      },
      "pxe_runtime_credentials": {
        "username": "ansible",
        "root_password_hash": null,
        "local_user_password_hash": null
      },
      "slurm_mirror": {
        "url": "https://dl.rockylinux.org/pub/sig/9/hpc/x86_64/hpc-core/",
        "repoid": "rocky-sig-hpc-core",
        "name": "Rocky Linux 9 - SIG HPC Core",
        "mirror_root": "/srv/repos/slurm",
        "publish_root": "/var/www/html/slurm",
        "gpgcheck": 1,
        "gpgkey_url": "/etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-9",
        "newest_only": true,
        "delete": true
      }
    }
  }
}